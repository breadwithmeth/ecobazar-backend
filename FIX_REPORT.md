# üîß –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. ‚ùå –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ Zod
**–ü—Ä–æ–±–ª–µ–º–∞:** `errorMap` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –¥–ª—è `z.enum()`
```typescript
// –ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
z.enum(['STATUS1', 'STATUS2'], {
  errorMap: () => ({ message: '–û—à–∏–±–∫–∞' })
})

// –°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
z.enum(['STATUS1', 'STATUS2'], {
  message: '–û—à–∏–±–∫–∞'
})
```

**–§–∞–π–ª—ã:** `src/validators/schemas.ts`

### 2. ‚ùå –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ Zod errors
**–ü—Ä–æ–±–ª–µ–º–∞:** `result.error.errors` –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `result.error.issues`
```typescript
// –ë—ã–ª–æ:
result.error.errors.map((err: any) => ...)

// –°—Ç–∞–ª–æ:
result.error.issues.map((err: any) => ...)
```

### 3. ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π Jest –º–æ–∫–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Ç–∏–ø–æ–≤ –º–µ–∂–¥—É Prisma –∏ Jest mock —Ç–∏–ø–∞–º–∏

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–æ–∫–æ–≤:
```typescript
// –°–Ω–∞—á–∞–ª–∞ –º–æ–∫–∞–µ–º –º–æ–¥—É–ª—å
jest.mock('../src/lib/prisma', () => ({
  __esModule: true,
  default: {
    product: {
      findUnique: jest.fn(),
      // ... –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã
    }
  }
}));

// –ó–∞—Ç–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∏ —Ç–∏–ø–∏–∑–∏—Ä—É–µ–º
import prisma from '../src/lib/prisma';
const mockPrisma = prisma as any;
```

### 4. ‚ùå –û—à–∏–±–∫–∞ TypeScript —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** `global.mockUser` –Ω–µ –∏–º–µ–µ—Ç —Ç–∏–ø–æ–≤
```typescript
// –î–æ–±–∞–≤–∏–ª–∏ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—é —Ç–∏–ø–æ–≤:
declare global {
  var mockUser: any;
  var mockAdmin: any;
}
```

### 5. ‚ùå –û—à–∏–±–∫–∞ —Å delete –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º
**–ü—Ä–æ–±–ª–µ–º–∞:** `delete` —Ç—Ä–µ–±—É–µ—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ
```typescript
// –ë—ã–ª–æ:
delete dataWithoutCategory.categoryId;

// –°—Ç–∞–ª–æ:
const dataWithoutCategory = { ...mockProductData, categoryId: undefined };
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ TypeScript
```bash
npx tsc --noEmit
‚úÖ –ë–µ–∑ –æ—à–∏–±–æ–∫
```

### –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–æ–≤
```bash
npm test
‚úÖ Test Suites: 1 passed, 1 total
‚úÖ Tests: 13 passed, 13 total
‚úÖ Snapshots: 0 total
```

### –†–∞–±–æ—Ç–∞—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ ProductService

| –ú–µ—Ç–æ–¥ | –¢–µ—Å—Ç—ã | –°—Ç–∞—Ç—É—Å |
|-------|-------|--------|
| `createProduct` | 4 —Ç–µ—Å—Ç–∞ | ‚úÖ |
| `getProducts` | 2 —Ç–µ—Å—Ç–∞ | ‚úÖ |
| `getProductById` | 2 —Ç–µ—Å—Ç–∞ | ‚úÖ |
| `deleteProduct` | 3 —Ç–µ—Å—Ç–∞ | ‚úÖ |
| `getProductStock` | 2 —Ç–µ—Å—Ç–∞ | ‚úÖ |

**–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:** 13 —Ç–µ—Å—Ç–æ–≤ –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ç–µ—Å—Ç–æ–≤:**
   - –¢–µ—Å—Ç—ã –¥–ª—è OrderService
   - –¢–µ—Å—Ç—ã –¥–ª—è AuthService
   - Integration —Ç–µ—Å—Ç—ã

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å coverage:**
   ```bash
   npm run test:coverage
   ```

3. **–î–æ–±–∞–≤–∏—Ç—å E2E —Ç–µ—Å—Ç—ã:**
   - –¢–µ—Å—Ç—ã –ø–æ–ª–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
   - API integration —Ç–µ—Å—Ç—ã

4. **CI/CD:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–∏ –∫–æ–º–º–∏—Ç–∞—Ö
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞

---

**–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!** üéâ

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ –ø—Ä–æ–¥–∞–∫—à–Ω –¥–µ–ø–ª–æ—é.
