# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∑–∞–∫–∞–∑–æ–≤ –≤ Admin API

## –ü—Ä–æ–±–ª–µ–º–∞
–í Admin API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ (`GET /api/orders/admin/all`) –∑–∞–∫–∞–∑—ã –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –≤ –ø–æ—Ä—è–¥–∫–µ –æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫ –Ω–æ–≤—ã–º, —á—Ç–æ –Ω–µ—É–¥–æ–±–Ω–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω–æ –≤–∏–¥–µ—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –Ω–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã.

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω PaginationUtil
**–§–∞–π–ª:** `src/utils/apiResponse.ts`

**–î–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```typescript
static parseQuery(query: any): PaginationOptions {
  const page = parseInt(query.page) || 1;
  const limit = Math.min(parseInt(query.limit) || 10, 100);
  const sortBy = query.sortBy || 'id';
  const sortOrder = query.sortOrder === 'desc' ? 'desc' : 'asc'; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 'asc'
  
  return { page, limit, sortBy, sortOrder };
}
```

**–ü–æ—Å–ª–µ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```typescript
static parseQuery(query: any): PaginationOptions {
  const page = parseInt(query.page) || 1;
  const limit = Math.min(parseInt(query.limit) || 10, 100);
  const sortBy = query.sortBy || 'createdAt'; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è
  const sortOrder = query.sortOrder === 'asc' ? 'asc' : 'desc'; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º
  
  return { page, limit, sortBy, sortOrder };
}
```

### 2. –£–ª—É—á—à–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ orderController
**–§–∞–π–ª:** `src/controllers/orderController.ts`

```typescript
orderBy: PaginationUtil.buildOrderBy(sortBy || 'createdAt', sortOrder || 'desc'), // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –Ω–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã –ø–µ—Ä–≤—ã–º–∏
```

## –õ–æ–≥–∏–∫–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏

### –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (–±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤):
```
GET /api/orders/admin/all
// –†–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã –ø–µ—Ä–≤—ã–º–∏ (createdAt DESC)
```

### –° —è–≤–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
```bash
# –°—Ç–∞—Ä—ã–µ –∑–∞–∫–∞–∑—ã –ø–µ—Ä–≤—ã–º–∏
GET /api/orders/admin/all?sortOrder=asc

# –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ ID
GET /api/orders/admin/all?sortBy=id&sortOrder=desc

# –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å—É
GET /api/orders/admin/all?sortBy=status&sortOrder=asc
```

## –ü–æ–≤–µ–¥–µ–Ω–∏–µ API

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
- **–ü–æ–ª–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:** `createdAt` (–¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è)
- **–ü–æ—Ä—è–¥–æ–∫:** `desc` (–æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ —Å–ø–∏—Å–∫–∞

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∑–∞–∫–∞–∑—ã (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π):
```typescript
// –í getOrders() –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —É–∂–µ –±—ã–ª–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
orderBy: { createdAt: 'desc' } // –ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã –ø–µ—Ä–≤—ã–º–∏
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
```bash
curl -X GET "https://eco-b-6sgyz.ondigitalocean.app/api/orders/admin/all" \
  -H "Authorization: Bearer ADMIN_TOKEN"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": true,
  "data": [
    {
      "id": 5,
      "createdAt": "2025-07-23T12:00:00.000Z",
      "currentStatus": "NEW"
    },
    {
      "id": 4,
      "createdAt": "2025-07-23T11:00:00.000Z", 
      "currentStatus": "PREPARING"
    },
    {
      "id": 3,
      "createdAt": "2025-07-23T10:00:00.000Z",
      "currentStatus": "DELIVERED"
    }
  ]
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å —è–≤–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
```bash
# –°—Ç–∞—Ä—ã–µ –∑–∞–∫–∞–∑—ã –ø–µ—Ä–≤—ã–º–∏
curl -X GET "https://eco-b-6sgyz.ondigitalocean.app/api/orders/admin/all?sortOrder=asc" \
  -H "Authorization: Bearer ADMIN_TOKEN"

# –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
curl -X GET "https://eco-b-6sgyz.ondigitalocean.app/api/orders/admin/all?sortBy=userId&sortOrder=asc" \
  -H "Authorization: Bearer ADMIN_TOKEN"
```

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- –ò–∑–º–µ–Ω–∏–ª—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Ä—è–¥–æ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –Ø–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `sortBy` –∏ `sortOrder` –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ–µ

### ‚úÖ –í–ª–∏—è–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–∏–µ API:
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∑–∞–∫–∞–∑—ã** (`/api/orders`) - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–û—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–∫–∞–∑** (`/api/orders/:id`) - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ API** —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π - –ø–æ–ª—É—á–∏–ª–∏ —É–ª—É—á—à–µ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### üë• –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
- **–ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã —Å—Ä–∞–∑—É –≤–∏–¥–Ω—ã** –≤ –Ω–∞—á–∞–ª–µ —Å–ø–∏—Å–∫–∞
- **–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø** –∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∑–∞–∫–∞–∑–∞–º  
- **–õ–æ–≥–∏—á–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫** - –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º

### üîß –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ** –≤–æ –≤—Å–µ—Ö API
- **–õ–æ–≥–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**
- **–ì–∏–±–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏**

### üìä –î–ª—è —Å–∏—Å—Ç–µ–º—ã:
- **–ï–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥** –∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–µ –ø–æ –¥–∞—Ç–µ
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** (–∏–Ω–¥–µ–∫—Å –Ω–∞ createdAt)
- **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ**

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è + —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:
```bash
# –ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º NEW
curl -X GET "https://eco-b-6sgyz.ondigitalocean.app/api/orders/admin/all?status=NEW" \
  -H "Authorization: Bearer ADMIN_TOKEN"

# –ó–∞–∫–∞–∑—ã –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ —Å—Ç–∞—Ç—É—Å—É  
curl -X GET "https://eco-b-6sgyz.ondigitalocean.app/api/orders/admin/all?sortBy=currentStatus&sortOrder=asc" \
  -H "Authorization: Bearer ADMIN_TOKEN"
```

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è + —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:
```bash
# –ü–µ—Ä–≤—ã–µ 5 –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤
curl -X GET "https://eco-b-6sgyz.ondigitalocean.app/api/orders/admin/all?page=1&limit=5" \
  -H "Authorization: Bearer ADMIN_TOKEN"
```

## –°—Ç–∞—Ç—É—Å
‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è Admin API  
‚úÖ **–£–ª—É—á—à–µ–Ω–æ:** PaginationUtil —Å –ª–æ–≥–∏—á–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é  
‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å  
‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 23 –∏—é–ª—è 2025 –≥.  
**–í–µ—Ä—Å–∏—è:** 2.0  
**–í–ª–∏—è–Ω–∏–µ:** –í—Å–µ API —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
